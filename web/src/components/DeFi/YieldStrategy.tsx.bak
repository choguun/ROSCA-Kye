'use client';

import React, { useState, useEffect } from 'react';
import styles from './YieldStrategy.module.css';

interface YieldOpportunity {
  protocol: string;
  apy: string;
  tvl: string;
  risk: 'Low' | 'Medium' | 'High';
  description: string;
  icon: string;
}

interface LendingMetrics {
  totalLoaned: string;
  averageRate: string;
  defaultRate: string;
  socialTrustScore: string;
}

export const YieldStrategy = () => {
  const [yieldOpportunities] = useState<YieldOpportunity[]>([
    {
      protocol: 'SavingsPocket',
      apy: '5.24%',
      tvl: '$45,230',
      risk: 'Low',
      description: 'Core yield generation for idle Kye funds with guaranteed returns',
      icon: 'üè¶'
    },
    {
      protocol: 'Cross-Circle Lending',
      apy: '8.15%',
      tvl: '$12,450',
      risk: 'Medium',
      description: 'Lend to members of other circles backed by social collateral',
      icon: 'ü§ù'
    },
    {
      protocol: 'Early Payout Liquidity',
      apy: '12.30%',
      tvl: '$8,920',
      risk: 'Medium',
      description: 'Provide liquidity for emergency early withdrawals',
      icon: '‚ö°'
    },
    {
      protocol: 'Circle Insurance Pool',
      apy: '6.80%',
      tvl: '$23,100',
      risk: 'Low',
      description: 'Earn fees by insuring circles against member defaults',
      icon: 'üõ°Ô∏è'
    }
  ]);

  const [lendingMetrics] = useState<LendingMetrics>({
    totalLoaned: '156,780',
    averageRate: '7.45%',
    defaultRate: '0.12%',
    socialTrustScore: '97.3%'
  });

  return (
    <div className={styles.container}>
      <div className={styles.header}>
        <h1>üöÄ Advanced DeFi Strategies</h1>
        <p className={styles.subtitle}>
          Innovative yield and lending opportunities powered by social trust
        </p>
      </div>

      {/* Yield Opportunities */}
      <div className={styles.section}>
        <h2>üìà Yield Optimization</h2>
        <div className={styles.opportunitiesGrid}>
          {yieldOpportunities.map((opportunity, index) => (
            <div key={index} className={styles.opportunityCard} data-risk={opportunity.risk.toLowerCase()}>
              <div className={styles.opportunityHeader}>
                <div className={styles.opportunityIcon}>{opportunity.icon}</div>
                <div className={styles.opportunityInfo}>
                  <h3>{opportunity.protocol}</h3>
                  <div className={styles.riskBadge} data-risk={opportunity.risk.toLowerCase()}>
                    {opportunity.risk} Risk
                  </div>
                </div>
              </div>
              
              <div className={styles.opportunityMetrics}>
                <div className={styles.metric}>
                  <span className={styles.metricValue}>{opportunity.apy}</span>
                  <span className={styles.metricLabel}>APY</span>
                </div>
                <div className={styles.metric}>
                  <span className={styles.metricValue}>{opportunity.tvl}</span>
                  <span className={styles.metricLabel}>TVL</span>
                </div>
              </div>
              
              <p className={styles.opportunityDescription}>
                {opportunity.description}
              </p>
              
              <button className={styles.investButton}>
                Invest Now
              </button>
            </div>
          ))}
        </div>
      </div>

      {/* Social Lending Innovation */}
      <div className={styles.section}>
        <h2>ü§ù Social Lending Innovation</h2>
        
        <div className={styles.lendingOverview}>
          <div className={styles.lendingCard}>
            <h3>üè¶ Traditional DeFi Lending Problems</h3>
            <ul className={styles.problemList}>
              <li>‚ùå Over-collateralization (150-200%)</li>
              <li>‚ùå No social context or trust signals</li>
              <li>‚ùå Liquidation risks and impermanent loss</li>
              <li>‚ùå Complex financial instruments</li>
            </ul>
          </div>
          
          <div className={styles.lendingCard} data-highlight="true">
            <h3>‚úÖ Kye Protocol Social Lending</h3>
            <ul className={styles.solutionList}>
              <li>‚úÖ Social collateral through group membership</li>
              <li>‚úÖ LINE identity verification and reputation</li>
              <li>‚úÖ Cultural familiarity with ROSCA lending</li>
              <li>‚úÖ Peer pressure for repayment compliance</li>
            </ul>
          </div>
        </div>

        <div className={styles.lendingMetrics}>
          <h3>üìä Social Lending Performance</h3>
          <div className={styles.metricsGrid}>
            <div className={styles.lendingMetric}>
              <div className={styles.lendingValue}>${lendingMetrics.totalLoaned}</div>
              <div className={styles.lendingLabel">Total Loaned</div>
            </div>
            <div className={styles.lendingMetric}>
              <div className={styles.lendingValue}>{lendingMetrics.averageRate}</div>
              <div className={styles.lendingLabel}>Average Rate</div>
            </div>
            <div className={styles.lendingMetric}>
              <div className={styles.lendingValue}>{lendingMetrics.defaultRate}</div>
              <div className={styles.lendingLabel}>Default Rate</div>
            </div>
            <div className={styles.lendingMetric}>
              <div className={styles.lendingValue}>{lendingMetrics.socialTrustScore}</div>
              <div className={styles.lendingLabel}>Trust Score</div>
            </div>
          </div>
        </div>
      </div>

      {/* Advanced DeFi Features */}
      <div className={styles.section}>
        <h2>‚öôÔ∏è Advanced DeFi Integrations</h2>
        
        <div className={styles.featuresGrid}>
          <div className={styles.featureCard}>
            <div className={styles.featureIcon}>üîÑ</div>
            <h3>Automated Yield Aggregation</h3>
            <p>Smart contracts automatically route idle funds to highest-yielding protocols while maintaining liquidity for payouts.</p>
            <div className={styles.featureMetrics}>
              <span>Multi-protocol</span>
              <span>Auto-compounding</span>
              <span>Risk-adjusted</span>
            </div>
          </div>
          
          <div className={styles.featureCard}>
            <div className={styles.featureIcon}>üè¶</div>
            <h3>Cross-Circle Lending</h3>
            <p>Members can borrow against future payouts from other circles, creating a peer-to-peer lending network.</p>
            <div className={styles.featureMetrics}>
              <span>Social collateral</span>
              <span>Lower rates</span>
              <span>Reputation-based</span>
            </div>
          </div>
          
          <div className={styles.featureCard}>
            <div className={styles.featureIcon}>‚ö°</div>
            <h3>Emergency Liquidity</h3>
            <p>Liquidity providers earn fees by enabling early withdrawals for circle members in urgent situations.</p>
            <div className={styles.featureMetrics}>
              <span>Premium APY</span>
              <span>Social verification</span>
              <span>Quick settlement</span>
            </div>
          </div>
          
          <div className={styles.featureCard}>
            <div className={styles.featureIcon}>üõ°Ô∏è</div>
            <h3>Circle Insurance</h3>
            <p>Decentralized insurance pools protect circles against member defaults, funded by community premiums.</p>
            <div className={styles.featureMetrics}>
              <span>Community-funded</span>
              <span>Transparent claims</span>
              <span>Fair premiums</span>
            </div>
          </div>
        </div>
      </div>

      {/* Future Vision */}
      <div className={styles.visionSection}>
        <h2>üîÆ The Future of Social DeFi</h2>
        <div className={styles.visionContent}>
          <div className={styles.visionText}>
            <p>
              <strong>Kye Protocol is pioneering Social DeFi</strong> - a new category that combines 
              the efficiency of blockchain with the trust and familiarity of traditional social finance.
            </p>
            <p>
              By leveraging LINE's social graph and Korean cultural financial practices, we're creating 
              DeFi products that feel natural and accessible to mainstream users.
            </p>
          </div>
          
          <div className={styles.visionStats}>
            <div className={styles.visionStat}>
              <div className={styles.visionNumber}>$84B</div>
              <div className={styles.visionLabel">Global ROSCA Market</div>
            </div>
            <div className={styles.visionStat}>
              <div className={styles.visionNumber}>250M</div>
              <div className={styles.visionLabel">LINE Users</div>
            </div>
            <div className={styles.visionStat}>
              <div className={styles.visionNumber}>73%</div>
              <div className={styles.visionLabel">Korean Households</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};